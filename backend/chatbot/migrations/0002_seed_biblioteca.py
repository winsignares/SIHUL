# Generated by Django 5.2.7-alpha
from django.db import migrations

def seed_agente_biblioteca(apps, schema_editor):
    Agente = apps.get_model('chatbot', 'Agente')
    PreguntaSugerida = apps.get_model('chatbot', 'PreguntaSugerida')
    
    # Crear Agente de Biblioteca
    biblioteca = Agente.objects.create(
        nombre='Agente Biblioteca',
        subtitulo='Asistente de Biblioteca',
        descripcion='Consultas sobre prÃ©stamos de libros, horarios de la biblioteca, reservas de salas de estudio y recursos bibliogrÃ¡ficos.',
        icono='BookOpen',
        color='blue',
        bg_gradient='from-blue-500 via-blue-600 to-indigo-600',
        activo=True,
        endpoint_url='https://unilibrerag.app.n8n.cloud/webhook/409ecf49-cd44-4b01-ac40-4cda200d96e8',
        mensaje_bienvenida='Â¡Hola! ğŸ‘‹ Soy tu asistente de biblioteca.\n\nPuedo ayudarte con:\nğŸ“š PrÃ©stamos de libros\nâ° Horarios de la biblioteca\nğŸ“– Reservas de salas de estudio\nğŸ”„ Renovaciones\n\nÂ¿En quÃ© puedo asistirte hoy?',
        orden=1
    )
    
    # Crear preguntas sugeridas basadas en el contexto de la Universidad Libre
    preguntas = [
        'Â¿QuÃ© horarios tiene la biblioteca?',
        'Â¿CÃ³mo puedo renovar un libro?',
        'Â¿CuÃ¡ntas renovaciones puedo hacer?',
        'Â¿CÃ³mo reservo una sala de estudio?',
        'Â¿CuÃ¡l es el tiempo de prÃ©stamo para estudiantes de pregrado?',
        'Â¿CÃ³mo puedo subir mi trabajo de grado al repositorio?',
        'Â¿QuÃ© funciÃ³n tiene la cuenta de usuario de la biblioteca?',
        'Â¿CuÃ¡l es el correo para consultas sobre el repositorio?',
        'Â¿QuÃ© es la Universidad Libre?',
        'Â¿CuÃ¡l es la lÃ­nea gratuita de la Universidad Libre?'
    ]
    
    for idx, pregunta in enumerate(preguntas, start=1):
        PreguntaSugerida.objects.create(
            agente=biblioteca,
            pregunta=pregunta,
            orden=idx,
            contador_uso=0,
            activo=True
        )

class Migration(migrations.Migration):

    dependencies = [
        ('chatbot', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(seed_agente_biblioteca),
    ]
